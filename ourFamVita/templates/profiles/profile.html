{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <title>프로필 선택</title>
    <!-- 두 개의 css 파일을 동시 적용할 때 같은 아이디나 클래스의 경우 뒤에 있는 파일의 규칙이 적용됨 -->
    <link rel="stylesheet" href="{% static "css/bootstrap.min.css" %}">
    <link rel="stylesheet" href="{% static "css/style2.css" %}">
</head>

<body>
    <div>
        <nav class="navbar">
            <h1>Profile</h1>
            <div class="btn">
                <form action="{% url "users:logout" %}" method="POST">
                    {% csrf_token %}
                    <button class="btn btn-primary">Logout</button>
                </form>
            </div>
        </nav>
    </div>

    <br>
    <br>
    <br>
    <br>

    <div style="text-align: center">
        <h4>{{ user.custom_user_email }}님의 프로필 목록입니다.</h4>
        <div>
            {% if profile_count >= 10 %}
                <form action="{% url "profiles:profile" %}" method="POST">
                    {% csrf_token %}
                    <button class="btn profile-btn" style="width: 188px; height: 30px;" onclick="alert('프로필은 최대 10개까지 생성 가능합니다.')">프로필 생성</button>
                </form>
            {% else %}
                <form action="{% url "profiles:survey1" %}" method="POST">
                    {% csrf_token %}
                    <button class="btn profile-btn" style="width: 188px; height: 30px;">프로필 생성</button>
                </form>
            {% endif %}
        </div>
    </div>
    
    <div>
    <!-- <div style="margin: 5px 30% 2px 30%"> -->
        {% for profile in profiles %}
            <div class="profile-container">
                <div>
                    <!-- {{ forloop.counter }} -->
                    {{ profile.profile_name }}
                </div>
                <div>
                <div class="btn-group">
                    <form action="{% url "home:home_main" profile.profile_id %}" method="POST">
                        {% csrf_token %}
                        <button class="btn btn-primary">선택</button>
                    </form>
                    <form action="{% url "profiles:profile_info" profile.profile_id %}" method="POST">
                        {% csrf_token %}
                        <button class="btn btn-secondary">수정</button>
                    </form>
                    {% if profile_count == 1 %}
                        <form action="{% url "profiles:profile" %}" method="POST">
                            {% csrf_token %}
                            <button class="btn btn-secondary" onclick="alert('프로필을 삭제할 수 없습니다.')">삭제</button>
                        </form>
                    {% else %}
                        <form action="/profiles/{{ profile.profile_id }}/" method="POST">
                            {% csrf_token %}
                            <button class="btn btn-secondary" onclick="return confirm('선택한 프로필을 삭제하시겠습니까?')">삭제</button>
                        </form>
                    {% endif %}
                </div>
                </div>
            </div>
        {% endfor %}
    </div>

<br>
<br>
<br>
<br>

</body>

</html>