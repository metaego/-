<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>프로필 선택</title>
</head>

<body>
    <h1>Profile</h1>
    <div>
        <form action="{% url "users:logout" %}" method="POST">
            {% csrf_token %}
            <button>로그아웃</button>
        </form>
    </div>
    <h3>{{ user.custom_user_email }}님의 프로필 목록입니다.</h3>
    <div class="row mt-5">
        <div class="col-12">
            <table class="table">
                <thead>
                    <tr>
                        <th> </th>
                        <th>프로필 이름</th>
                        <th> </th>
                        <th> </th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    {% for profile in profiles %}
                        <tr>
                            <th>{{ forloop.counter }}</th>
                            <td>{{ profile.profile_name }}</td>
                            <td>
                                {% comment %} <form action="{{ profile.profile_id }}/surveys/{{ survey.survey_id }}/" method="POST"> {% endcomment %}
                                <form action="" method="POST">
                                    {% csrf_token %}
                                    <button>선택</button>
                                </form>
                            </td>
                            <td>
                                {% comment %} <form action="/profiles/{{ profile.profile_id }}/profile-info/" method="GET"> {% endcomment %}
                                {% comment %} {% csrf_token %} {% endcomment %}
                                <form action="{% url "profiles:profile_info" profile.profile_id %}" method="GET">
                                    <button>수정</button>
                                </form>
                            </td>
                            <td>
                                {% if profile_count == 1 %}
                                    <form action="{% url "profiles:profile" %}" method="POST">
                                        {% csrf_token %}
                                        <button onclick="alert('프로필을 삭제할 수 없습니다.')">삭제</button>
                                    </form>
                                {% else %}
                                    <form action="/profiles/{{ profile.profile_id }}/" method="POST">
                                        {% csrf_token %}
                                        <button onclick="alert('선택한 프로필을 삭제하시겠습니까?')">삭제</button>
                                    </form>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            {% if profile_count >= 10 %}
                <form action="{% url "profiles:profile" %}" method="POST">
                    {% csrf_token %}
                    <button onclick="alert('프로필은 최대 10개까지 생성 가능합니다.')">프로필 생성</button>
                </form>
            {% else %}
                <form action="{% url "profiles:survey1" %}" method="POST">
                    {% csrf_token %}
                    <button>프로필 생성</button>
                </form>
            {% endif %}
        </div>
    </div>
</body>

</html>