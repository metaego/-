<!-- menu: ai 영양제 추천받기 > 영양 성분 리포트 > 영양제 추천 목록 > 영양제 상세보기 -->
{% extends "base.html" %}
{% block content %}
{% load static %}
<style>
    .profile_image {
        width: 100px; 
        height: auto; 
    }
    .product_image {
        width: 100px; 
        height: auto; 
    }
</style>
<h1>영양제 상세보기</h1>
<strong>아래 기능을 개선하는데 좋은 제품이에요</strong><br>
{% for p_ingredient in product_ingredients %}
    <li>{{ p_ingredient.ingredient_function_content }}<br></li>
{% endfor %}
<br>
<strong>제품 상세</strong><br>
{% if product.product_image == '0' %}
    <img src="{% static 'product/product_temp_image_240506.png' %}" alt="영양제 제품 이미지" class='product_image'>
{% else %}
    <img src="{% static '{ product.product_image }' %}" alt="영양제 제품 이미지" class='product_image'>
{% endif %}
<li>제품명: {{ product.product_name }}</li>
<li>제품평점: {{ product.product_rating_avg }}/5</li>
<li>제조사명: {{ product.product_company }}</li>
<li>제품 효능: {{ product.product_fuction_content }}</li>
<li>섭취 방법: {{ product.product_instruction }}</li>
<li>제품형태: {{ product.product_dispose }}</li>
<li>섭취 시 주의사항: {{ product.product_caution }}</li>
<li>보관 방법: {% if product.product_storage_method == None %}
                    {{ '습기가 적고 직사광선을 밪지 않는 실온에 보관하시고, 어린이의 손에 닿지 않도록 주의하시기 바랍니다.' }}
               {% else %}
                    {{ product.product_storage_method }}
               {% endif %}</li>
<li>소비기한: {{ product.product_serving }}</li>
<br>
<div>
    <strong>추천 성분 분석</strong><br>
    {% for p_ingredient in product_ingredients %}
        {{ p_ingredient.ingredient_name }}
        {% if not forloop.last %},{% endif %}
    {% endfor %}
</div>
<br>
<div>
    <strong>주요 건강 기능</strong><br>
    {% for p_ingredient in product_ingredients %}
        {{ p_ingredient.ingredient_function_content }}
        {% if not forloop.last %},{% endif %}
{% endfor %}
</div>
<br>
<div>
    <strong>리뷰</strong>
    {% if review == False %}
        <form id="comment-form" action="{% url 'products:product_review' product.product_id profile.profile_id %}" method="post">
            {% csrf_token %}
            별점:
            <select name="rating">
                <option value="1">1점</option>
                <option value="2">2점</option>
                <option value="3">3점</option>
                <option value="4">4점</option>
                <option value="5">5점</option>
            </select><br>
            <textarea id="comment" name="comment" rows="4" cols="50" maxlength="200" placeholder="댓글을 입력하세요(최대 200자)"></textarea><br>
            <input type="submit" value="댓글 등록">
        </form>
    {% else %}
        <li>{{ review.product_review_rating }} 점 | {{ review.product_review_content }} </li>
    {% endif %}
</div>
<script>
    document.getElementById("comment-form").addEventListener("submit", function(event) {
        var comment = document.getElementById("comment").value;
        if (comment.trim() === "") {
            event.preventDefault();
            alert("댓글을 작성하세요!");
        }
    });
</script>
{% comment %} <div>
<strong>현재시간: </strong>
    <div id="current-time"> 
    </div>
    <script>
        function whatTimeIsIT() {
            var currentTime = new Date();
            return currentTime;
        }
    
        // 페이지가 로드될 때마다 현재 시간을 표시
        window.onload = function() {
            var currentTimeElement = document.getElementById('current-time');
            currentTimeElement.innerHTML = whatTimeIsIT();
        };
    </script>
</div> {% endcomment %}
{% endblock content %}